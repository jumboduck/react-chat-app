(this["webpackJsonpreact-chat-app"]=this["webpackJsonpreact-chat-app"]||[]).push([[0],{23:function(e,t,s){},30:function(e,t,s){},31:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s(2),c=s.n(a),d=s(15),i=s.n(d),r=(s(23),s(17)),o=s(9),u=s(3),l=s(4),j=function(){return fetch("https://www.randomtext.me/api/gibberish/p-1/1-10/").then((function(e){return e.json()})).then((function(e){return e.text_out.replace(/(<([^>]+)>(\\r)?)/gi,"")}))},m=s(7),g=s.n(m),b=s(13),f=s(6),v=s(5),p=s(16),O=s.n(p),h=function(e){var t=e.msgInput.current,s=function(){var s=Object(b.a)(g.a.mark((function s(n){var a;return g.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:n.preventDefault(),t.value.trim().length>0&&!e.editMode&&(e.addNewMessage(e.savedMsg,"outgoing"),e.setSavedMsg("")),e.editMode?e.updateMessage(e.editIndex,e.savedMsg):(a="",function(){var t=Object(b.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:setTimeout(Object(b.a)(g.a.mark((function t(){var s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j();case 2:s=t.sent,a=s,e.addNewMessage(a,"incoming");case 5:case"end":return t.stop()}}),t)}))),2e3);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()());case 4:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}(),c=Object(a.useState)(!1),d=Object(u.a)(c,2),i=d[0],r=d[1];return Object(n.jsxs)("form",{className:e.editMode?"message-form editing-input":"message-form",onSubmit:s,children:[Object(n.jsx)("label",{htmlFor:"message-input",className:"sr-only",children:"Message:"}),Object(n.jsx)("div",{className:i?"emoji-picker":"hidden",children:Object(n.jsx)(O.a,{disableAutoFocus:!0,onEmojiClick:function(s,n){r(!1);var a=t.selectionStart,c=t.selectionEnd-t.selectionStart,d=t.value.split("");d.splice(a,c,n.emoji);var i=d.join("");e.setSavedMsg(i),t.focus(),t.selectionStart=t.selectionEnd=a+1}})}),Object(n.jsx)("button",{type:"button",className:"open-emojis",onClick:function(e){e.preventDefault(),r(!i)},children:Object(n.jsx)(f.a,{icon:v.d})}),Object(n.jsx)("input",{id:"message-input",type:"text",ref:e.msgInput,className:"message-input",placeholder:"Type here...",autoComplete:"off",onChange:function(t){e.setSavedMsg(t.currentTarget.value)},value:e.savedMsg||"",onKeyDown:function(s){if(38===s.keyCode&&e.lastMessageIndex>=0&&!1===e.editMode){for(var n=e.lastMessageIndex;"incoming"===e.currentMessages[n].direction;)n--;t.blur(),setTimeout((function(){e.enterEditMode(n)}),0)}}}),Object(n.jsxs)("button",{type:"submit",className:"send-message",children:[Object(n.jsx)("span",{className:"sr-only",children:"send"}),Object(n.jsx)(f.a,{icon:v.b})]})]},"MessageForm")},x=function(e){return Object(n.jsx)(n.Fragment,{children:"outgoing"===e.message.direction?Object(n.jsxs)("div",{className:"outgoing",children:[Object(n.jsx)("button",{className:e.editMode&&e.index===e.editIndex?"message editing":"message",onClick:function(){return e.enterEditMode(e.index)},children:e.message.message}),Object(n.jsx)("p",{className:"msg-date",children:e.message.edit?"edited on "+e.message.edit:e.message.time})]}):Object(n.jsxs)("div",{className:"incoming",children:[Object(n.jsx)("div",{className:"message",children:e.message.message}),Object(n.jsx)("p",{className:"msg-date",children:e.message.edit?"edited on "+e.message.edit:e.message.time})]})})},M=function(e){var t,s=e.messages.name,c=e.messages.messages,d=Object(a.useRef)(null);return Object(a.useEffect)((function(){d&&d.current.addEventListener("DOMNodeInserted",(function(e){var t=e.currentTarget;t.scroll({top:t.scrollHeight})}))}),[]),Object(n.jsxs)("div",{className:"chat-window",children:[Object(n.jsx)("ul",{className:"message-list",ref:d,children:0!==c.length?c.map((function(t,s){return Object(n.jsx)("li",{children:Object(n.jsx)(x,{message:t,enterEditMode:e.enterEditMode,index:s,editMode:e.editMode,editIndex:e.editIndex})},s)})):null}),0===c.length?Object(n.jsxs)("p",{className:"no-message",children:["This is the beginning of your conversation with"," ",s]}):null,Object(n.jsx)(h,(t={addNewMessage:e.addNewMessage,updateSaved:e.updateSaved,setSavedMsg:e.setSavedMsg,savedMsg:e.savedMsg,currentMessages:c},Object(l.a)(t,"addNewMessage",e.addNewMessage),Object(l.a)(t,"updateMessage",e.updateMessage),Object(l.a)(t,"editMode",e.editMode),Object(l.a)(t,"setEditMode",e.setEditMode),Object(l.a)(t,"editIndex",e.editIndex),Object(l.a)(t,"enterEditMode",e.enterEditMode),Object(l.a)(t,"lastMessageIndex",c.length-1),Object(l.a)(t,"msgInput",e.msgInput),t))]})},N=function(e){var t=Object(a.useRef)();return Object(n.jsxs)("form",{className:"message-form friend-form",onSubmit:function(s){s.preventDefault(),t.current.value.length>0&&(e.addNewFriend(t.current.value),t.current.value="")},children:[Object(n.jsx)("label",{htmlFor:"new-friend",className:"sr-only",children:"Enter new friend's Name"}),Object(n.jsx)("input",{id:"new-friend",type:"text",ref:t,className:"new-friend",placeholder:"Add a friend",autoComplete:"off"}),Object(n.jsxs)("button",{type:"submit",className:"send-message",children:[Object(n.jsx)("span",{className:"sr-only",children:"add a friend"}),Object(n.jsx)(f.a,{icon:v.c})]})]})},w=function(e){for(var t=function(t){t.preventDefault();var s=e.editMode?"":e.savedMsg;e.updateSaved(s);var n=t.target.dataset.conv;e.setCurrentConv(n),e.setSavedMsg(e.data[n].saved),e.setEditMode(!1),e.msgInput.current.focus(),i(!1)},s=Object(a.useState)(!1),c=Object(u.a)(s,2),d=c[0],i=c[1],r=[],o=0,l=Object.entries(e.data);o<l.length;o++){var j=Object(u.a)(l[o],2),m=j[0],g=j[1];r.push({name:g.name,id:m})}return Object(n.jsxs)("div",{className:"friend-list",children:[Object(n.jsxs)("h2",{className:"friends-title",children:[Object(n.jsxs)("button",{className:"hamburger-icon",onClick:function(e){e.preventDefault(),i(!d)},children:[Object(n.jsx)("span",{className:"sr-only",children:"Display Friend List"}),Object(n.jsx)(f.a,{icon:v.a})]}),Object(n.jsx)(f.a,{icon:v.e})," friends"]}),Object(n.jsxs)("div",{className:d?"friends-buttons":"friend-buttons hidden-mobile",children:[r.map((function(s){return Object(n.jsx)("button",{className:s.id===e.currentConv?"friend-btn friend-selected":"friend-btn","data-conv":s.id,onClick:t,children:s.name},s.id)})),Object(n.jsx)(N,{addNewFriend:e.addNewFriend})]})]})},S=function(){var e=Object(a.useState)("1"),t=Object(u.a)(e,2),s=t[0],c=t[1],d=Object(a.useState)(!1),i=Object(u.a)(d,2),l=i[0],j=i[1],m=Object(a.useState)(null),g=Object(u.a)(m,2),b=g[0],f=g[1],v=Object(a.useRef)(),p=Object(a.useState)({1:{name:"Daniel",messages:[],saved:"",editMode:!1},2:{name:"Issaaf",messages:[],saved:"",editMode:!1},3:{name:"Simon",messages:[],saved:"",editMode:!1},4:{name:"Tracy",messages:[],saved:"",editMode:!1},5:{name:"Whiskey",messages:[],saved:"",editMode:!1}}),O=Object(u.a)(p,2),h=O[0],x=O[1],N=Object(a.useState)(""),S=Object(u.a)(N,2),I=S[0],y=S[1],E=function(e){var t=h[s];t.saved=e;var n=Object(o.a)({},h);n[s]=t,x(n)};return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"chat-container",children:[Object(n.jsx)(w,{data:h,currentConv:s,setCurrentConv:c,addNewFriend:function(e){var t=Object.keys(h).map((function(e){return parseInt(e)})),s=Math.max.apply(Math,Object(r.a)(t))+1,n=Object(o.a)({},h);n[s]={name:e,messages:[],saved:"",editMode:!1},x(n),c(s.toString())},updateSaved:E,savedMsg:I,setSavedMsg:y,editMode:l,setEditMode:j,msgInput:v}),Object(n.jsx)(M,{messages:h[s],addNewMessage:function(e,t){var n=h[s],a=(new Date).toLocaleString();n.messages.push({message:e,time:a,direction:t});var c=Object(o.a)({},h);c[s]=n,x(c)},updateSaved:E,setSavedMsg:y,savedMsg:I,editMode:l,setEditMode:j,editIndex:b,setEditIndex:f,updateMessage:function(e,t){var n=h[s],a=(new Date).toLocaleString();n.messages[e].message=t,n.messages[e].edit=a;var c=Object(o.a)({},h);c[s]=n,x(c),j(!1),y("")},msgInput:v,enterEditMode:function(e){var t=h[s].messages[e].message;f(e),y(t),j(!0),v.current.focus()}})]})})};s(30);var I=function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(S,{})})},y=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,32)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,d=t.getTTFB;s(e),n(e),a(e),c(e),d(e)}))};i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(I,{})}),document.getElementById("root")),y()}},[[31,1,2]]]);
//# sourceMappingURL=main.056b7751.chunk.js.map